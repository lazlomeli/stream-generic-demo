/* Chat Container */
.chat-container {
  min-height: calc(100vh - 4rem);
  background-color: white;
  position: relative;
  z-index: auto;
  transform: none;
  isolation: auto;
  overflow: visible;
}

/* Chat Header */
.chat-header {
  background-color: white;
  border-bottom: 1px solid #e5e7eb;
  padding: 1rem 1.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.chat-header-title {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 600;
  color: #111827;
}

/* Chat Layout - Updated for Stream Chat SDK */
.chat-layout {
  display: flex;
  height: calc(100vh - 8rem);
  position: relative;
  z-index: auto;
  transform: none;
  isolation: auto;
}

/* Left Sidebar - Channel List */
.chat-sidebar {
  width: 300px;
  border-right: 1px solid #e5e7eb;
  background-color: #f9fafb;
  overflow-y: auto;
  position: relative;
  z-index: 1;
  transform: none;
  isolation: auto;
}

/* Right Main Area - Chat */
.chat-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  position: relative;
  z-index: 2;
  overflow: visible;
  transform: none;
  isolation: auto;
}

/* Custom Channel List Styles */
.custom-channel-list {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.channel-list-header {
  padding: 1rem;
  border-bottom: 1px solid #e5e7eb;
  background-color: white;
}

.channel-list-header h3 {
  margin: 0;
  font-size: 1.125rem;
  font-weight: 600;
  color: #111827;
}

.channel-list-items {
  flex: 1;
  overflow-y: auto;
  padding: 0.5rem;
}

.channel-item-button {
  width: 100%;
  padding: 0.75rem;
  border: none;
  background: transparent;
  border-radius: 0.5rem;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
  margin-bottom: 0.25rem;
}

.channel-item-button:hover {
  background-color: #f3f4f6;
}

.channel-item-button.selected {
  background-color: #dbeafe;
  border: 1px solid #3b82f6;
}

.channel-item-content {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.channel-item-avatar {
  position: relative;
  flex-shrink: 0;
}

.channel-item-avatar-image {
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  object-fit: cover;
}

.channel-item-text {
  flex: 1;
  min-width: 0;
}

.channel-item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.25rem;
}

.channel-item-name {
  margin: 0;
  font-size: 0.875rem;
  font-weight: 500;
  color: #111827;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.channel-item-time {
  font-size: 0.75rem;
  color: #6b7280;
  flex-shrink: 0;
}

.channel-item-message {
  margin: 0;
  font-size: 0.75rem;
  color: #6b7280;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Legacy chat-area (keeping for backward compatibility) */
.chat-area {
  flex: 1;
}

/* Error State */
.chat-error {
  min-height: calc(100vh - 4rem);
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #f9fafb;
}

.chat-error-content {
  background-color: white;
  border-radius: 0.5rem;
  padding: 2rem;
  max-width: 28rem;
  width: 100%;
  margin: 0 1rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.chat-error-icon {
  width: 4rem;
  height: 4rem;
  background-color: #fef2f2;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1rem;
}

.chat-error-icon svg {
  width: 2rem;
  height: 2rem;
  color: #dc2626;
}

.chat-error-title {
  font-size: 1.125rem;
  font-weight: 500;
  color: #111827;
  margin-bottom: 0.5rem;
}

.chat-error-message {
  color: #6b7280;
  margin-bottom: 1.5rem;
}

.chat-error-button {
  background-color: #f3f4f6;
  color: #374151;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  font-size: 0.875rem;
  font-weight: 500;
  transition: all 0.2s ease-in-out;
  border: none;
  cursor: pointer;
}

.chat-error-button:hover {
  background-color: #e5e7eb;
}

/* Loading State */
.chat-loading {
  min-height: calc(100vh - 4rem);
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #f9fafb;
}

.chat-loading-content {
  background-color: white;
  border-radius: 0.5rem;
  padding: 2rem;
  max-width: 28rem;
  width: 100%;
  margin: 0 1rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  text-align: center;
}

.chat-loading-spinner {
  width: 3rem;
  height: 3rem;
  border: 2px solid transparent;
  border-bottom-color: #3b82f6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 1rem;
}

.chat-loading-text {
  color: #6b7280;
}

/* Animation */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Stream Chat Modal and Tooltip Z-Index Fixes - Enhanced */
.str-chat__tooltip,
.str-chat__message-actions-box,
.str-chat__message-reactions-selector,
.str-chat__message-actions,
.str-chat__thread-list,
.str-chat__modal,
.str-chat__modal-wrapper,
.str-chat__overlay,
.str-chat__dropdown,
.str-chat__dropdown-container,
.str-chat__message-options,
.str-chat__message-options-box,
.str-chat__emoji-picker,
.str-chat__giphy-preview,
.str-chat__attachment-actions,
.str-chat__message-actions-list,
.str-chat__message-reactions-list,
.str-chat__reactions-list,
.str-chat__reactions-list-container,
.str-chat__message-bounce,
.str-chat__message-actions-tooltip,
.str-chat__modal-inner,
.str-chat__modal-content,
.str-chat__popover,
.str-chat__popover-content,
.str-chat__message-overlay,
.str-chat__message-options-overlay {
  z-index: 999999 !important;
  position: fixed !important;
}

/* Ensure message actions container has high z-index */
.str-chat__message-simple__actions {
  z-index: 9998 !important;
  position: relative !important;
}

/* Ensure message container allows for overlays */
.str-chat__message-simple {
  position: relative !important;
}

/* Fix for reaction tooltips */
.str-chat__reaction-tooltip {
  z-index: 10000 !important;
}

/* Fix for thread sidebar */
.str-chat__thread {
  z-index: 1000 !important;
}

/* Ensure reactions list appears above other content */
.str-chat__reaction-list {
  z-index: 9997 !important;
}

/* Fix for autocomplete popups */
.str-chat__autocomplete-container {
  z-index: 9996 !important;
}

/* Additional fixes for message interaction elements */
.str-chat__message-actions-container,
.str-chat__message-replies-count-button,
.str-chat__message-timestamp,
.str-chat__popover-container,
.str-chat__popover,
.str-chat__tooltip-container {
  z-index: 9995 !important;
  position: relative !important;
}

/* Ensure proper stacking context for message lists */
.str-chat__message-list-scroll,
.str-chat__message-list {
  position: relative !important;
  z-index: 10 !important;
}

/* Fix overflow issues that can hide modals */
.str-chat__channel,
.str-chat__main-panel,
.str-chat__container,
.str-chat__thread,
.str-chat__window,
.str-chat__message-list-scroll,
.str-chat__message-list {
  overflow: visible !important;
  position: relative !important;
}

/* Ensure proper positioning for floating elements */
.str-chat__channel-inner {
  position: relative !important;
  overflow: visible !important;
}

/* Critical: Ensure modals are rendered at document level */
.str-chat__modal,
.str-chat__modal-wrapper,
.str-chat__overlay {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 999999 !important;
  pointer-events: none !important;
}

.str-chat__modal-inner,
.str-chat__modal-content {
  pointer-events: auto !important;
  position: relative !important;
  z-index: 1000000 !important;
}

/* Specific fixes for message actions and reactions */
.str-chat__message-actions-box,
.str-chat__message-reactions-selector,
.str-chat__reactions-list {
  position: absolute !important;
  z-index: 999999 !important;
  background: white !important;
  border: 1px solid #e5e7eb !important;
  border-radius: 8px !important;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1) !important;
  pointer-events: auto !important;
}

/* Fix for emoji mart picker */
.emoji-mart {
  z-index: 10001 !important;
}

/* Fix for any portal-rendered content */
[data-portal="true"] {
  z-index: 10002 !important;
}

/* Disable unwanted animations for Stream Chat modals and tooltips */
.str-chat__tooltip,
.str-chat__message-actions-box,
.str-chat__message-reactions-selector,
.str-chat__message-actions,
.str-chat__modal,
.str-chat__modal-wrapper,
.str-chat__overlay,
.str-chat__dropdown,
.str-chat__dropdown-container,
.str-chat__message-options,
.str-chat__message-options-box,
.str-chat__emoji-picker,
.str-chat__giphy-preview,
.str-chat__attachment-actions,
.str-chat__reaction-tooltip,
.str-chat__autocomplete-container,
.str-chat__message-actions-container,
.str-chat__message-replies-count-button,
.str-chat__message-timestamp,
.str-chat__popover-container,
.str-chat__popover,
.str-chat__tooltip-container,
.str-chat__reaction-list {
  animation: none !important;
  transition: none !important;
  transform: none !important;
}

/* Specifically target any slide-in animations */
.str-chat__message-actions-box[style*="transform"],
.str-chat__message-actions-box[style*="transition"],
.str-chat__message-actions-box[style*="animation"],
.str-chat__dropdown[style*="transform"],
.str-chat__dropdown[style*="transition"],
.str-chat__dropdown[style*="animation"] {
  transform: none !important;
  transition: none !important;
  animation: none !important;
}

/* Ensure modals appear instantly without sliding */
.str-chat__modal,
.str-chat__modal-wrapper {
  transform: none !important;
  transition: none !important;
  animation: none !important;
}

/* Fix for any CSS animations that might be applied */
.str-chat__message-actions-box.animate-in,
.str-chat__dropdown.animate-in,
.str-chat__tooltip.animate-in {
  animation: none !important;
  transition: none !important;
  transform: none !important;
}

/* Additional fixes for any remaining animations */
.str-chat__message-actions-box *,
.str-chat__dropdown *,
.str-chat__tooltip *,
.str-chat__modal *,
.str-chat__modal-wrapper * {
  animation: none !important;
  transition: none !important;
  transform: none !important;
}

/* Target any elements with specific animation classes */
[class*="animate"],
[class*="transition"],
[class*="slide"],
[class*="fade"] {
  animation: none !important;
  transition: none !important;
  transform: none !important;
}

/* Poll-specific animation fixes */
.str-chat__poll-option,
.str-chat__poll-option-button,
.str-chat__poll-option-vote,
.str-chat__poll-option-vote-count,
.str-chat__poll-option-vote-bar,
.str-chat__poll-option-vote-percentage,
.str-chat__poll-option-vote-text,
.str-chat__poll-option-vote-label,
.str-chat__poll-option-vote-input,
.str-chat__poll-option-vote-checkbox,
.str-chat__poll-option-vote-radio,
.str-chat__poll-option-vote-select,
.str-chat__poll-option-vote-multiselect,
.str-chat__poll-option-vote-dropdown,
.str-chat__poll-option-vote-popover,
.str-chat__poll-option-vote-tooltip,
.str-chat__poll-option-vote-modal,
.str-chat__poll-option-vote-overlay {
  animation: none !important;
  transition: none !important;
  transform: none !important;
}

/* Ensure poll elements have proper z-index */
.str-chat__poll-option,
.str-chat__poll-option-button,
.str-chat__poll-option-vote,
.str-chat__poll-option-vote-count,
.str-chat__poll-option-vote-bar,
.str-chat__poll-option-vote-percentage,
.str-chat__poll-option-vote-text,
.str-chat__poll-option-vote-label,
.str-chat__poll-option-vote-input,
.str-chat__poll-option-vote-checkbox,
.str-chat__poll-option-vote-radio,
.str-chat__poll-option-vote-select,
.str-chat__poll-option-vote-multiselect,
.str-chat__poll-option-vote-dropdown,
.str-chat__poll-option-vote-popover,
.str-chat__poll-option-vote-tooltip,
.str-chat__poll-option-vote-modal,
.str-chat__poll-option-vote-overlay {
  z-index: 9999 !important;
  position: relative !important;
}

/* Ensure no transform origins cause positioning issues */
.str-chat__message-actions-box,
.str-chat__dropdown,
.str-chat__tooltip,
.str-chat__modal {
  transform-origin: initial !important;
  transform-box: initial !important;
}

/* Custom Channel Header Styles */
.custom-channel-header {
  background-color: white;
  border-bottom: 1px solid #e5e7eb;
  padding: 1rem 1.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.custom-channel-header-content {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.custom-channel-header-avatar {
  flex-shrink: 0;
}

.custom-channel-header-info {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.custom-channel-header-title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
  color: #111827;
  line-height: 1.4;
}

.custom-channel-header-subtitle {
  margin: 0;
  font-size: 0.875rem;
  color: #6b7280;
  line-height: 1.4;
}

/* Responsive adjustments for channel header */
@media (max-width: 768px) {
  .custom-channel-header {
    padding: 0.75rem 1rem;
  }
  
  .custom-channel-header-title {
    font-size: 1.125rem;
  }
  
  .custom-channel-header-subtitle {
    font-size: 0.8rem;
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .chat-layout {
    flex-direction: column;
  }
  
  .chat-sidebar {
    width: 100%;
    height: auto;
    max-height: 200px;
    border-right: none;
    border-bottom: 1px solid #e5e7eb;
  }
  
  .chat-main {
    flex: 1;
  }
}

/* ===== CRITICAL MODAL FIXES - MUST BE LAST ===== */
/* Global rule to ensure all Stream Chat modals work properly */
[class*="str-chat__modal"],
[class*="str-chat__overlay"],
[class*="str-chat__dropdown"],
[class*="str-chat__tooltip"],
[class*="str-chat__message-actions"],
[class*="str-chat__reactions"],
[class*="str-chat__popover"] {
  z-index: 999999 !important;
}

/* Ensure body and html don't interfere with modals */
body, html {
  overflow-x: visible !important;
}

/* Force all Stream Chat containers to allow overflow */
[class*="str-chat__"] {
  overflow: visible !important;
}

/* Specific override for problematic containers */
.str-chat__channel,
.str-chat__main-panel,
.str-chat__message-list-scroll,
.str-chat__virtual-message-list-wrapper,
.str-chat__virtual-message-list {
  overflow: visible !important;
  position: relative !important;
  z-index: auto !important;
  contain: none !important;
}

/* Ensure React portals render above everything */
.str-chat__modal-root,
[data-react-modal-body-trap] {
  z-index: 1000000 !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  pointer-events: none !important;
}

.str-chat__modal-root > *,
[data-react-modal-body-trap] > * {
  pointer-events: auto !important;
}
